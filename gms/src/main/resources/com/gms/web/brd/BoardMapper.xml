<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gms.web.brd.BoardMapper">
	<select id="getAll" resultType="com.gms.web.brd.Board">
	 SELECT *
        FROM (
            SELECT
                ROW_NUMBER() OVER(ORDER BY BNO DESC) AS NUM,
                A.*
            FROM
                BOARD A
        )B
        WHERE B.NUM BETWEEN #{beginRow} AND #{endRow}
        ORDER BY B.NUM
	</select>
	<select id="getMy" resultType="com.gms.web.brd.Board">
	 SELECT *
        FROM (
            SELECT
                ROW_NUMBER() OVER(ORDER BY BNO DESC) AS NUM,
                A.*
            FROM
                BOARD A
            
        )B
        WHERE B.NUM BETWEEN #{beginRow} AND #{endRow}
        AND writer LIKE #{writer}
        ORDER BY B.NUM
        
	</select>
	<select id="count" resultType="int">
	SELECT COUNT(*) FROM board
	</select>
	<select id="countAll" resultType="int">
		SELECT
			COUNT(*) 
		FROM 
			board
	</select>
	<select id="countMy" resultType="int">
		SELECT
			COUNT(*) 
		FROM 
			board
		WHERE
			writer = #{writer}
	</select>
	<insert id="post">
		INSERT INTO board (writer, title, content)
		VALUES ( #{writer} , #{title} , #{content} )
	</insert>
	<select id="get" resultType="com.gms.web.brd.Board">
		SELECT * 
		FROM board 
		WHERE bno = #{bno} 
	</select>
<!-- 	SELECT @RNUM := @RNUM + 1 AS ROWNUM, t.*
 
FROM
 
  (
 
    SELECT *
 
    FROM table
 
    ORDER BY column1
 
  ) t,
 
  ( SELECT @RNUM := 0 ) R
--!>

</mapper>
